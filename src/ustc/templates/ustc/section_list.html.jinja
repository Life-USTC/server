{% extends "ustc/base.html.jinja" %}
{% load i18n %}
{% load ustc_extras %}
{% block title %}
  {% trans "Sections" %} - {% trans "Life@USTC" %}
{% endblock %}
{% block content %}
  <div class="list-header">
    <div class="list-title-row">
      <h1><i class="bi bi-grid-3x3"></i> {% trans 'Course Sections' %}</h1>
      <form method="get" class="list-filter-form" id="search-form" data-auto-submit="true">
        <div class="input-group list-filter-input search-compact me-2">
          <span class="input-group-text"><i class="bi bi-search"></i></span>
          <input type="text"
                 name="q"
                 class="form-control"
                 placeholder="{% trans 'Search by code...' %}"
                 value="{{ request.GET.q|default:'' }}" />
        </div>
        <select name="semester" class="form-select list-filter-input select me-2">
          <option value="">{% trans 'All Semesters' %}</option>
          {% for sem in semesters %}
            <option value="{{ sem.id }}"
                    {% if request.GET.semester == sem.id|stringformat:"i" %}selected{% endif %}>{{ sem.name }}</option>
          {% endfor %}
        </select>
        <select name="department" class="form-select list-filter-input select me-2">
          <option value="">{% trans 'All Departments' %}</option>
          {% for dept in departments %}
            <option value="{{ dept.id }}"
                    {% if request.GET.department == dept.id|stringformat:"i" %}selected{% endif %}>
              {{ dept|translated_name }}
            </option>
          {% endfor %}
        </select>
        <button type="submit" class="btn btn-primary">
          <i class="bi bi-funnel"></i> {% trans 'Filter' %}
        </button>
      </form>
    </div>
  </div>
  {% include 'ustc/partials/result_count.html.jinja' with item_name="sections" %}
  <div class="list-table-container">
    {% include 'ustc/partials/section_table.html.jinja' with sections=sections show_semester=True empty_message="No sections found." %}
  </div>
  {% include 'ustc/partials/pagination.html.jinja' %}
{% endblock %}
