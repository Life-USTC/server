{% extends "ustc/base.html.jinja" %}
{% load i18n %}
{% load ustc_extras %}
{% block title %}
  {{ semester.name }} - {% trans "Life@USTC" %}
{% endblock %}
{% block content %}
  {% trans "N/A" as na_text %}
  <div class="detail-header-container">
    <div class="detail-back-button">
      <a href="{% url 'ustc:semester-list' %}" class="btn btn-outline-secondary">
        <i class="bi bi-chevron-left"></i> {% trans 'Back to Semesters' %}
      </a>
    </div>
    <div class="detail-header">
      <div>
        <div class="text-start gap-2">
          <h1 class="mb-0">{{ semester.name }}</h1>
          <span class="mb-0 text-muted">{{ semester.start_date|date:"Y.m.d" }} - {{ semester.end_date|date:"Y.m.d" }}</span>
        </div>
      </div>
    </div>
  </div>
  <h4 class="mb-3">{% trans "Sections in this Semester" %}</h4>
  <div class="mb-4">
    <form method="get" class="row g-3" id="search-form" data-auto-submit="true">
      <div class="col-md-3">
        <input type="text"
               name="q"
               class="form-control"
               placeholder="{% trans 'Search sections...' %}"
               value="{{ search_query|default:'' }}">
      </div>
      <div class="col-md-3">
        <select name="department" class="form-select">
          <option value="">{% trans 'All Departments' %}</option>
          {% for dept in departments %}
            <option value="{{ dept.id }}"
                    {% if department_filter == dept.id|stringformat:"i" %}selected{% endif %}>
              {{ dept|translated_name }}
            </option>
          {% endfor %}
        </select>
      </div>
      <div class="col-md-2">
        <select name="campus" class="form-select">
          <option value="">{% trans 'All Campuses' %}</option>
          {% for campus in campuses %}
            <option value="{{ campus.id }}"
                    {% if campus_filter == campus.id|stringformat:"i" %}selected{% endif %}>
              {{ campus|translated_name }}
            </option>
          {% endfor %}
        </select>
      </div>
      <div class="col-md-2">
        <select name="exam_mode" class="form-select">
          <option value="">{% trans 'All Exam Modes' %}</option>
          {% for exam_mode in exam_modes %}
            <option value="{{ exam_mode.id }}"
                    {% if exam_mode_filter == exam_mode.id|stringformat:"i" %}selected{% endif %}>
              {{ exam_mode|translated_name }}
            </option>
          {% endfor %}
        </select>
      </div>
      <div class="col-md-2">
        <button type="submit" class="btn btn-primary w-100">{% trans 'Filter' %}</button>
      </div>
    </form>
  </div>
  {% include 'ustc/partials/result_count.html.jinja' with item_name="sections" %}
  {% include 'ustc/partials/section_table.html.jinja' with sections=sections show_semester=False empty_message="No sections found for this semester." %}
  {% include 'ustc/partials/pagination.html.jinja' %}
</div>
{% endblock %}
